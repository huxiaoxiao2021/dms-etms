<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/util
	http://www.springframework.org/schema/util/spring-util.xsd">

    <bean name="sortingNumberLimitConfig" class="com.jd.bluedragon.distribution.ver.config.SortingNumberLimitConfig" >
		<property name="siteTypes">
			<map>
				<entry key="4">
					<set>
						<value>4</value>
					</set>
				</entry>
				<entry key="64">
					<set>
						<value>256</value>
						<value>64</value>
						<value>6408</value>
						<value>6409</value>
						<value>6410</value>
					</set>
				</entry>
			</map>
    	</property>
    </bean>

    <!--  固定箱号前缀的系统  -->
    <!--  @see com.jd.bluedragon.distribution.box.domain.BoxSystemTypeEnum   -->
    <bean id="stableBoxPrefixSystem"  class="java.util.HashSet">
        <constructor-arg type="java.util.Collection">
            <set>
                <!-- 京喜快递 -->
                <value type="java.lang.String">03</value>
            </set>
        </constructor-arg>
    </bean>

    <!--  固定箱号前缀的类型  -->
    <!--  @see com.jd.bluedragon.distribution.box.constants.BoxTypeEnum  -->
    <bean id="stableBoxPrefixType"  class="java.util.HashSet">
        <constructor-arg type="java.util.Collection">
            <set>
                <value type="java.lang.String">ZH</value>
                <value type="java.lang.String">ZF</value>
                <value type="java.lang.String">ZK</value>
                <value type="java.lang.String">ZQ</value>
                <value type="java.lang.String">ZS</value>
            </set>
        </constructor-arg>
    </bean>
    <!-- 旧异常扫描-校验改地址原因ids -->
    <bean id="checkPrintInterceptReasonIdSetForOld"  class="java.util.HashSet">
    	<constructor-arg type="java.util.Collection">
        	<set value-type="java.lang.Integer">    
				<!-- 20260-锁定订单退回 -->
				<value>20260</value>
				<!-- 20261-退款100分订单退回 -->
				<value>20261</value>	
				<!-- 20262-客户取消订单 -->
				<value>20262</value>	
				<!-- 20263-包装损坏无法发货 -->
				<value>20263</value>
				<!-- 20264-订单地址超区 -->
				<value>20264</value>	
			</set>		
        </constructor-arg>
    </bean>
	<!-- 新异常上报-校验改地址原因ids -->
    <bean id="checkPrintInterceptReasonIdSet"  class="java.util.HashSet">
    	<constructor-arg type="java.util.Collection">
        	<set value-type="java.lang.Long">
				<!-- 45186-客户取消订单 -->
				<value>45186</value>
			</set>
        </constructor-arg>
    </bean>
    <!-- 获取包裹明细线程池配置，参考了jsf线程池配置，由于上层请求流量限制来自jsf，要考虑线程池不能成为瓶颈 -->
    <bean id="executorparallelGetPackageExecutor" class="com.jd.bluedragon.utils.ThreadPoolExecutorFactory">
        <property name="corePoolSize" value="${parallel.getpackage.Executor.corePoolSize:20}"/><!-- jsf:server配置: 初始线程数 20，所有接口共用，达到200请求就报错 -->
        <property name="maxPoolSize" value="${parallel.getpackage.Executor.maxPoolSize:50}"/><!-- jsf:server配置: 默认线程池 200，但是是给所有的接口公用 -->
        <property name="keepAliveSeconds" value="${parallel.getpackage.Executor.keepAliveSeconds:60}"/>
        <property name="queueCapacity" value="${parallel.getpackage.Executor.queueCapacity:2000}"/><!-- jsf:server配置: 最大线程池200，最坏情况 一个请求分10页。队列需要200*20 -->
        <property name="threadName" value="${parallel.getpackage.Executor.threadName:getPackageThread}"/>
    </bean>
    <!-- 并发任务处理线程池配置 -->
    <bean id="concurrentJobHandlerExecutor" class="com.jd.bluedragon.utils.ThreadPoolExecutorFactory">
        <property name="corePoolSize" value="${beans.concurrentJobHandlerExecutor.corePoolSize:10}"/><!-- jsf:server配置: 初始线程数 20，所有接口共用，达到200请求就报错 -->
        <property name="maxPoolSize" value="${beans.concurrentJobHandlerExecutor.maxPoolSize:100}"/><!-- jsf:server配置: 默认线程池 200，但是是给所有的接口公用 -->
        <property name="keepAliveSeconds" value="${beans.concurrentJobHandlerExecutor.keepAliveSeconds:60}"/>
        <property name="queueCapacity" value="${beans.concurrentJobHandlerExecutor.queueCapacity:2000}"/><!-- jsf:server配置: 最大线程池200，最坏情况 一个请求分10页。队列需要200*20 -->
        <property name="threadName" value="${beans.concurrentJobHandlerExecutor.threadName:concurrentJobHandlerThread}"/>
    </bean>    
	<bean id="parentConcurrentJobHandler" class="com.jd.bluedragon.dms.job.ConcurrentJobHandler" abstract="true">
		<constructor-arg index="0" ref="concurrentJobHandlerExecutor"></constructor-arg>
	</bean>
	<bean id="checkCanAirToRoadJobHandler" class="com.jd.bluedragon.distribution.arAbnormal.CheckCanAirToRoadJobHandler" parent="parentConcurrentJobHandler">
	</bean>
    <bean id="checkStrandReportJobHandler" class="com.jd.bluedragon.distribution.abnormal.service.impl.CheckStrandReportJobHandler" parent="parentConcurrentJobHandler">
    </bean>	
</beans>
