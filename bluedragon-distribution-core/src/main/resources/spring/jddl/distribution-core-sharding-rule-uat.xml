<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="vtabroot" class="com.jd.jddl.interact.rule.VirtualTableRoot" init-method="init">
        <property name="dbType" value="MYSQL"/>
        <property name="defaultDbIndex" value="bd_dms_spl0"/>
        <property name="tableRules">
            <map>
                <entry key="kv_index" value-ref="kv_index_bean"/>
                <entry key="box" value-ref="box_bean"/>
                <entry key="dms_out_weight_volume" value-ref="dms_out_weight_volume_bean"/>
                <entry key="send_d" value-ref="send_d_bean"/>
                <entry key="send_m" value-ref="send_m_bean"/>
                <entry key="inspection" value-ref="inspection_bean"/>
                <entry key="cen_confirm" value-ref="cen_confirm_bean"/>
                <entry key="sorting" value-ref="sorting_bean"/>
                <entry key="business_code" value-ref="business_code"/>
                <entry key="business_code_attribute" value-ref="business_code_attribute"/>
            </map>
        </property>
    </bean>

    <bean id="kv_index_bean" class="com.jd.jddl.interact.rule.TableRule">
        <property name="extraPackages" value="com.jd.bluedragon.utils.jddl.*"/>
        <property name="dbNamePattern" value="bd_dms_spl{0}"/>
        <property name="dbRuleArray">
            <value>
                return DmsJddlUtils.getDbInstanceIndex((#keyword, 1_string,1024#));
            </value>
        </property>
        <property name="tbNamePattern" value="bd_dms_spl{0}.kv_index"/>
        <property name="tbRuleArray">
            <value>
                return DmsJddlUtils.getDbPartitionIndex((#keyword, 1_string,1024#));
            </value>
        </property>
        <property name="allowFullTableScan" value="true"/>
    </bean>

    <bean id="box_bean" class="com.jd.jddl.interact.rule.TableRule">
        <property name="extraPackages" value="com.jd.bluedragon.utils.jddl.*"/>
        <property name="dbNamePattern" value="bd_dms_spl{0}"/>
        <property name="dbRuleArray">
            <value>
                return DmsJddlUtils.getDbInstanceIndex((#box_code, 1_string,1024#));
            </value>
        </property>
        <property name="tbNamePattern" value="bd_dms_spl{0}.box"/>
        <property name="tbRuleArray">
            <value>
                return DmsJddlUtils.getDbPartitionIndex((#box_code, 1_string,1024#));
            </value>
        </property>
        <property name="allowFullTableScan" value="true"/>
    </bean>

    <bean id="dms_out_weight_volume_bean" class="com.jd.jddl.interact.rule.TableRule">
        <property name="extraPackages" value="com.jd.bluedragon.utils.jddl.*"/>
        <property name="dbNamePattern" value="bd_dms_spl{0}"/>
        <property name="dbRuleArray">
            <value>
                return DmsJddlUtils.getDbInstanceIndex((#create_site_code,1,1024#).longValue());
            </value>
        </property>
        <property name="tbNamePattern" value="bd_dms_spl{0}.dms_out_weight_volume"/>
        <property name="tbRuleArray">
            <value>
                return DmsJddlUtils.getDbPartitionIndex((#create_site_code,1,1024#).longValue());
            </value>
        </property>
        <property name="allowFullTableScan" value="true"/>
    </bean>

    <bean id="send_d_bean" class="com.jd.jddl.interact.rule.TableRule">
        <property name="extraPackages" value="com.jd.bluedragon.utils.jddl.*"/>
        <property name="dbNamePattern" value="bd_dms_spl{0}"/>
        <property name="dbRuleArray">
            <value>
                return DmsJddlUtils.getDbInstanceIndex((#create_site_code, 1, 1024#).longValue());
            </value>
        </property>
        <property name="tbNamePattern" value="bd_dms_spl{0}.send_d"/>
        <property name="tbRuleArray">
            <value>
                return DmsJddlUtils.getDbPartitionIndex((#create_site_code, 1, 1024#).longValue());
            </value>
        </property>
        <property name="allowFullTableScan" value="true"/>
    </bean>

    <bean id="send_m_bean" class="com.jd.jddl.interact.rule.TableRule">
        <property name="extraPackages" value="com.jd.bluedragon.utils.jddl.*"/>
        <property name="dbNamePattern" value="bd_dms_spl{0}"/>
        <property name="dbRuleArray">
            <value>
                return DmsJddlUtils.getDbInstanceIndex((#create_site_code, 1, 1024#).longValue());
            </value>
        </property>
        <property name="tbNamePattern" value="bd_dms_spl{0}.send_m"/>
        <property name="tbRuleArray">
            <value>
                return DmsJddlUtils.getDbPartitionIndex((#create_site_code, 1, 1024#).longValue());
            </value>
        </property>
        <property name="allowFullTableScan" value="true"/>
    </bean>

    <bean id="inspection_bean" class="com.jd.jddl.interact.rule.TableRule">
        <property name="extraPackages" value="com.jd.bluedragon.utils.jddl.*"/>
        <property name="dbNamePattern" value="bd_dms_spl{0}"/>
        <property name="dbRuleArray">
            <value>
                return DmsJddlUtils.getDbInstanceIndex((#create_site_code, 1, 1024#).longValue());
            </value>
        </property>
        <property name="tbNamePattern" value="bd_dms_spl{0}.inspection"/>
        <property name="tbRuleArray">
            <value>
                return DmsJddlUtils.getDbPartitionIndex((#create_site_code, 1, 1024#).longValue());
            </value>
        </property>
        <property name="allowFullTableScan" value="true"/>
    </bean>

    <bean id="cen_confirm_bean" class="com.jd.jddl.interact.rule.TableRule">
        <property name="extraPackages" value="com.jd.bluedragon.utils.jddl.*"/>
        <property name="dbNamePattern" value="bd_dms_spl{0}"/>
        <property name="dbRuleArray">
            <value>
                return DmsJddlUtils.getDbInstanceIndex((#create_site_code, 1, 1024#).longValue());
            </value>
        </property>
        <property name="tbNamePattern" value="bd_dms_spl{0}.cen_confirm"/>
        <property name="tbRuleArray">
            <value>
                return DmsJddlUtils.getDbPartitionIndex((#create_site_code, 1, 1024#).longValue());
            </value>
        </property>
        <property name="allowFullTableScan" value="true"/>
    </bean>

    <bean id="sorting_bean" class="com.jd.jddl.interact.rule.TableRule">
        <property name="extraPackages" value="com.jd.bluedragon.utils.jddl.*"/>
        <property name="dbNamePattern" value="bd_dms_spl{0}"/>
        <property name="dbRuleArray">
            <value>
                return DmsJddlUtils.getDbInstanceIndex((#create_site_code, 1, 1024#).longValue());
            </value>
        </property>
        <property name="tbNamePattern" value="bd_dms_spl{0}.sorting"/>
        <property name="tbRuleArray">
            <value>
                return DmsJddlUtils.getDbPartitionIndex((#create_site_code, 1, 1024#).longValue());
            </value>
        </property>
        <property name="allowFullTableScan" value="true"/>
    </bean>

    <bean id="business_code" class="com.jd.jddl.interact.rule.TableRule">
        <property name="extraPackages" value="com.jd.bluedragon.utils.jddl.*"/>
        <property name="dbNamePattern" value="bd_dms_core{0}"/>
        <property name="dbRuleArray">
            <value>
                return DmsJddlUtils.getDbInstanceIndex((#code, 1_string,1024#));
            </value>
        </property>
        <property name="tbNamePattern" value="bd_dms_core{0}.business_code"/>
        <property name="tbRuleArray">
            <value>
                return DmsJddlUtils.getDbPartitionIndex((#code, 1_string,1024#));
            </value>
        </property>
        <property name="allowFullTableScan" value="true"/>
    </bean>

    <bean id="business_code_attribute" class="com.jd.jddl.interact.rule.TableRule">
        <property name="extraPackages" value="com.jd.bluedragon.utils.jddl.*"/>
        <property name="dbNamePattern" value="bd_dms_core{0}"/>
        <property name="dbRuleArray">
            <value>
                return DmsJddlUtils.getDbInstanceIndex((#code, 1_string,1024#));
            </value>
        </property>
        <property name="tbNamePattern" value="bd_dms_core{0}.business_code_attribute"/>
        <property name="tbRuleArray">
            <value>
                return DmsJddlUtils.getDbPartitionIndex((#code, 1_string,1024#));
            </value>
        </property>
        <property name="allowFullTableScan" value="true"/>
    </bean>

</beans>