<?xml version="1.0" encoding="GBK"?>
<!DOCTYPE configuration
    PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-config.dtd">

<configuration>
	
	<settings>  
		<setting name="lazyLoadingEnabled" value="false" />
		<setting name="autoMappingBehavior" value="FULL"/>
        <!-- 默认全局超时都设置成30秒 -->
        <setting name="defaultStatementTimeout" value="30"/>
	</settings>
	
	<typeAliases>
	    <typeAlias type="com.jd.bluedragon.distribution.box.domain.Box" alias="Box" />

	    <typeAlias type="com.jd.bluedragon.distribution.task.domain.Task" alias="Task" />
	   
	    <typeAlias type="com.jd.bluedragon.distribution.seal.domain.SealBox" alias="SealBox" />
	    <typeAlias type="com.jd.bluedragon.distribution.seal.domain.SealVehicle" alias="SealVehicle" />
	    
		<typeAlias type="com.jd.bluedragon.distribution.sorting.domain.Sorting" alias="Sorting" />
	    <typeAlias type="com.jd.bluedragon.distribution.sorting.domain.SortingReturn" alias="SortingReturn"/>
		
		<typeAlias type="com.jd.bluedragon.distribution.send.domain.SendM" alias="SendM" />
	    <typeAlias type="com.jd.bluedragon.distribution.send.domain.SendDetail" alias="SendDetail" />
		
		<typeAlias type="com.jd.bluedragon.distribution.receive.domain.Receive" alias="Receive" />

		<typeAlias type="com.jd.bluedragon.distribution.receive.domain.CenConfirm" alias="CenConfirm"/>
		<typeAlias type="com.jd.bluedragon.distribution.departure.domain.DepartureCar" alias="DepartureCar" />
		<typeAlias type="com.jd.bluedragon.distribution.departure.domain.DepartureSend"  alias="DepartureSend"/>
		<typeAlias type="com.jd.bluedragon.distribution.departure.domain.DepartureLog" alias="DepartureLog"/>
		<typeAlias type="com.jd.bluedragon.distribution.api.request.DepartureTmpRequest" alias="DepartureTmpSend"/>
	    <typeAlias type="com.jd.bluedragon.distribution.inspection.domain.Inspection" alias="Inspection"/>
	    <typeAlias type="com.jd.bluedragon.distribution.inspection.domain.InspectionEC" alias="InspectionEC"/>
	    	    
	    <typeAlias type="com.jd.bluedragon.distribution.popPrint.domain.PopPrint" alias="PopPrint"/>
	    <typeAlias type="com.jd.bluedragon.distribution.popAbnormal.domain.PopAbnormal" alias="PopAbnormal"/>
	    
	    <typeAlias type="com.jd.bluedragon.distribution.version.domain.ClientVersion" alias="ClientVersion"/>
	    <typeAlias type="com.jd.bluedragon.distribution.version.domain.ClientConfig" alias="ClientConfig"/>
	    <typeAlias type="com.jd.bluedragon.distribution.version.domain.VersionEntity" alias="VersionEntity"/>
	    <typeAlias type="com.jd.bluedragon.distribution.version.domain.ClientConfigHistory" alias="ClientConfigHistory"/>
	    <typeAlias type="com.jd.bluedragon.distribution.operationLog.domain.OperationLog"  alias="OperationLog"/>
	    
	    <typeAlias type="com.jd.bluedragon.distribution.failqueue.domain.TaskFailQueue"  alias="taskFailQueue"/>
	    
	    <typeAlias type="com.jd.bluedragon.distribution.reverse.domain.ReverseReject"  alias="ReverseReject"/>
	    <typeAlias type="com.jd.bluedragon.distribution.reverse.domain.ReverseReceive"  alias="ReverseReceive"/>
	    <typeAlias type="com.jd.bluedragon.distribution.reverse.domain.ReverseSpare"  alias="ReverseSpare"/>
	    <typeAlias type="com.jd.bluedragon.distribution.reverse.domain.LossOrder"  alias="LossOrder"/>
	    
	    <typeAlias type="com.jd.bluedragon.distribution.spare.domain.Spare"  alias="Spare"/>
   	    <typeAlias type="com.jd.bluedragon.distribution.spare.domain.SpareSale"  alias="SpareSale"/>
	   
	    <typeAlias type="com.jd.bluedragon.distribution.reassignWaybill.domain.ReassignWaybill"  alias="reassignWaybill"/>
	    
	    <typeAlias type="com.jd.bluedragon.distribution.base.domain.SysConfig" alias="sysConfig" />  	
	    
	    <typeAlias type="com.jd.bluedragon.distribution.abnormalorder.domain.AbnormalOrder" alias="abnormalOrder" />
   	    
   	    <typeAlias type="com.jd.bluedragon.distribution.popPrint.domain.PopQueue"  alias="popQueue"/>
   	    <typeAlias type="com.jd.bluedragon.distribution.popPrint.domain.PopSignin"  alias="PopSignin"/>
   	    <typeAlias type="com.jd.bluedragon.distribution.popReveice.domain.PopReceive"  alias="PopReceive"/>
	    <typeAlias type="com.jd.bluedragon.distribution.popPickup.domain.PopPickup" alias="PopPickup"/>
   	    <typeAlias type="com.jd.bluedragon.distribution.popReveice.domain.TaskPopRecieveCount"  alias="TaskPopRecieveCount"/>
   	     
 	    <typeAlias type="com.jd.bluedragon.distribution.popAbnormal.domain.PopReceiveAbnormal"  alias="PopReceiveAbnormal"/>
   	    <typeAlias type="com.jd.bluedragon.distribution.popAbnormal.domain.PopAbnormalDetail"  alias="PopAbnormalDetail"/>
	    <typeAlias type="com.jd.bluedragon.distribution.receive.domain.TurnoverBox" alias="TurnoverBox" />
	    
	    <typeAlias type="com.jd.bluedragon.distribution.offline.domain.OfflineLog" alias="OfflineLog" />
	    
	    <typeAlias type="com.jd.bluedragon.distribution.reverse.domain.PickWare" alias="PickWare" />
	    <typeAlias type="com.jd.bluedragon.distribution.label.domain.Label" alias="Label" />
	    <typeAlias type="com.jd.bluedragon.distribution.batch.domain.BatchSend" alias="BatchSend" />
	    <typeAlias type="com.jd.bluedragon.distribution.batch.domain.BatchInfo" alias="BatchInfo" />
        <typeAlias type="com.jd.bluedragon.distribution.sorting.domain.SortingException" alias="sortingException"/>
        <typeAlias type="com.jd.bluedragon.distribution.systemLog.domain.SystemLog"  alias="SystemLog"/>
        
        <typeAlias type="com.jd.bluedragon.distribution.cross.domain.CrossSorting" alias="CrossSorting"/>
        <typeAlias type="com.jd.bluedragon.distribution.globaltrade.domain.LoadBill" alias="LoadBill" />
        <typeAlias type="com.jd.bluedragon.distribution.globaltrade.domain.LoadBillReport" alias="LoadBillReport" />
        <typeAlias type="com.jd.bluedragon.distribution.gantry.domain.GantryDeviceConfig" alias="gantryDeviceConfig"/>
        <typeAlias type="com.jd.bluedragon.distribution.waybill.domain.FreshWaybill" alias="freshWaybill"/>

    </typeAliases>
	<plugins>
        <!--
          数据库访问监控组件
        -->
        <plugin interceptor="com.jd.etms.framework.utils.orm.monitor.DbAccessInterceptor">
            <property name="sqlExceptionEnabled" value="true" />  <!--sql执行异常报警-->
            <property name="sqlExceptionKey" value="ql.dms.sql.exception" />  <!--sql执行异常报警key-->
            <property name="slowSqlEnabled" value="true" />   <!--慢sql超时-->
            <property name="slowSqlKey" value="ql.dms.slowsql.timeout" />  <!--慢sql超时报警key-->
            <property name="slowSqlTimeout" value="1000" />   <!--慢sql超时时间1秒-->
            <property name="tooManyActiveConnEnabled" value="true" /> <!--连接数过多报警-->
            <property name="tooManyActiveConnKey" value="ql.dms.tooMany.active.connection" />  <!--连接数过多报警key-->
            <property name="maxActiveConRatio" value="0.7f"/> <!--连接数占比max-active-->
            <property name="isLogDBUrl" value="true"/> <!--是否显示DB连接url-->
        </plugin>

        <!--
        mq消息发送说明：
        拦截更新插件， 在更新时记录更新操作
        属性说明：
        swallowException: true在发生异常时只记录日志， false在发生异常时记录日志， 并抛出异常
        mqProducerBeanName: mq消息生产者bean名称
        mq-xxx-topicName: mq为固定前缀， xxx表示sqlId， topicName表示发送到的mq topic名称， 值格式为作为businessId的属性， 逗号后面部分为发送消息的条件判断类， 逗号后面部分可省略
        -->
        <plugin interceptor="com.jd.coo.sa.mybatis.plugins.event.ExecutorUpdatePlugin">
            <property name="swallowException" value="false"/>
            <property name="mqProducerBeanName" value="jmqProducer"/>
            <!--保证事务的一致性, 会在事务提交前发消息， 如果消息发送成功，提交事务，否则抛出异常，事务回滚-->
            <property name="keepConsistency" value="true"/>
            <!-- 注意： MQPluginContext需要spring上下文， 请在spring配置文件中添加此类bean， 以使此类可以找到当前的ApplicationContext -->
            <property name="pluginContextType" value="com.jd.coo.sa.mybatis.plugins.event.mq.MQPluginContext"/>
            <!--<property name="mq-com.jd.coo.sa.mybatis.plugins.test.dao.StudentDao.insertWithPrimary-jmqtest" value="id"/>-->

            <property name="mq-com.jd.bluedragon.distribution.box.dao.BoxDao.add-bd_dms" value=""/>
            <property name="mq-com.jd.bluedragon.distribution.box.dao.BoxDao.batchUpdateStatus-bd_dms" value=""/>
            <property name="mq-com.jd.bluedragon.distribution.inspection.dao.InspectionDao.add-bd_monitor" value=""/>
            <property name="mq-com.jd.bluedragon.distribution.popPrint.dao.PopPrintDao.add-bd_monitor" value=""/>
            <property name="mq-com.jd.bluedragon.distribution.popPrint.dao.PopPrintDao.updateByWaybillCode-bd_monitor" value=""/>
            <property name="mq-com.jd.bluedragon.distribution.receive.dao.CenConfirmDao.add-bd_monitor" value=""/>

            <property name="mq-com.jd.bluedragon.distribution.receive.dao.CenConfirmDao.updateFillField-bd_monitor" value=""/>
            <property name="mq-com.jd.bluedragon.distribution.receive.dao.ReceiveDao.add-bd_monitor" value=""/>
            <property name="mq-com.jd.bluedragon.distribution.send.dao.SendDatailDao.UpdatewaybillCodeStatus-bd_monitor" value=""/>
            <property name="mq-com.jd.bluedragon.distribution.send.dao.SendDatailDao.cancelSendDatail-bd_monitor" value=""/>
            <property name="mq-com.jd.bluedragon.distribution.sorting.dao.SortingDao.add-bd_monitor" value=""/>
            <property name="mq-com.jd.bluedragon.distribution.sorting.dao.SortingDao.canCancel-bd_monitor" value=""/>
            <property name="mq-com.jd.bluedragon.distribution.sorting.dao.SortingDao.update-bd_monitor" value=""/>
            <property name="mq-com.jd.bluedragon.distribution.sorting.dao.SortingReturnDao.add-bd_monitor" value=""/>
        </plugin>
        <!-- 拦截Executor的commit方法， 在commit时发送mq消息， 如果keepConsistency为true则在事务提交前发消息， 如果发消息失败抛出异常， 阻止事务提交，老保证一致性； 否则在事务提交后发消息-->
        <plugin interceptor="com.jd.coo.sa.mybatis.plugins.event.ExecutorCommitPlugin">
            <property name="keepConsistency" value="true"/>
        </plugin>
        <!-- 拦截Executor的rollback方法， 在rollback时清空现有的消息-->
        <plugin interceptor="com.jd.coo.sa.mybatis.plugins.event.ExecutorRollbackPlugin"/>
        </plugins>
	<mappers>
		<mapper resource="mappers/oracle/box/BoxMapper.xml"/>

		<mapper resource="mappers/oracle/task/TaskMapper.xml"/>
		
		<mapper resource="mappers/oracle/seal/SealBoxMapper.xml"/>
		<mapper resource="mappers/oracle/seal/SealVehicleMapper.xml"/>

		<mapper resource="mappers/oracle/sorting/SortingMapper.xml"/>
		<mapper resource="mappers/oracle/sorting/SortingReturnMapper.xml"/>
		
		<mapper resource="mappers/oracle/send/SendMMapper.xml"/>
		<mapper resource="mappers/oracle/send/SendDatailMapper.xml"/>
		
		<mapper resource="mappers/oracle/receive/ReceiveMapper.xml"/>
		<mapper resource="mappers/oracle/receive/TurnoverBoxMapper.xml"/>
		
		<mapper resource="mappers/oracle/departure/DepartureCarMapper.xml"/>
		<mapper resource="mappers/oracle/receive/CenConfirmMapper.xml"/>
		
		<mapper resource="mappers/oracle/inspection/InspectionECMapper.xml"/>
		<mapper resource="mappers/oracle/inspection/InspectionMapper.xml"/>
		<mapper resource="mappers/oracle/operationLog/OperationLogMapper.xml"/>
		
		<mapper resource="mappers/oracle/receiveInspectionExc/ShieldsErrorMapper.xml"/>
		
		<mapper resource="mappers/oracle/partnerWaybill/partnerWaybilllMapper.xml"/>
		
		<mapper resource="mappers/oracle/popPrint/PopPrintMapper.xml"/>
		<mapper resource="mappers/oracle/popAbnormal/PopAbnormalMapper.xml"/>	
		
		<mapper resource="mappers/oracle/version/ClientVersionMapper.xml"/>
		<mapper resource="mappers/oracle/version/ClientConfigMapper.xml"/>
		<mapper resource="mappers/oracle/version/ClientConfigHistoryMapper.xml"/>
		
		<mapper resource="mappers/oracle/failqueue/FailQueueMapper.xml"/>
		
		<mapper resource="mappers/oracle/reverse/ReverseRejectMapper.xml"/>
		<mapper resource="mappers/oracle/reverse/ReverseReceiveMapper.xml"/>
		<mapper resource="mappers/oracle/reverse/ReverseSpareMapper.xml"/>
		<mapper resource="mappers/oracle/reverse/LossOrderMapper.xml"/>
		
		<mapper resource="mappers/oracle/spare/SpareMapper.xml"/>
		<mapper resource="mappers/oracle/spare/SpareSaleMapper.xml"/>
		<mapper resource="mappers/oracle/departure/DepartureSendMapper.xml"/>
		<mapper resource="mappers/oracle/departure/DepartureLogMapper.xml"/>
		<mapper resource="mappers/oracle/departure/DepartureTmpMapper.xml"/>

		<mapper resource="mappers/oracle/reassignWaybill/ReassignWaybillMapper.xml"/>
		
		<mapper resource="mappers/oracle/popPickup/PopPickupMapper.xml"/>
		<mapper resource="mappers/oracle/sysconfig/SysConfigMapper.xml"/>

		<mapper resource="mappers/oracle/popPrint/popQueueMapper.xml"/>
		<mapper resource="mappers/oracle/popPrint/PopSigninMapper.xml"/>
		<mapper resource="mappers/oracle/popReceive/PopReceiveMapper.xml"/>
		<mapper resource="mappers/oracle/popReceive/TaskPopRecieveCountMapper.xml"/>
		
		<mapper resource="mappers/oracle/abnormalorder/AbnormalOrderMapper.xml"/>
		
		<mapper resource="mappers/oracle/popAbnormal/PopReceiveAbnormalMapper.xml"/>
		<mapper resource="mappers/oracle/popAbnormal/PopAbnormalDetailMapper.xml"/>
		
		<mapper resource="mappers/oracle/offLine/OfflineLogMapper.xml"/>
		<mapper resource="mappers/oracle/reverse/PickWareMapper.xml"/>
		<mapper resource="mappers/oracle/label/LabelMapper.xml"/>
        <mapper resource="mappers/oracle/fBarCode/FBarCodeMapper.xml"/>
        <mapper resource="mappers/oracle/batch/BatchInfoMapper.xml"/>
        <mapper resource="mappers/oracle/batch/BatchSendMapper.xml"/>
        <mapper resource="mappers/oracle/sorting/SortingExceptionMapper.xml"/>
        <mapper resource="mappers/oracle/send/SendQueryMapper.xml"/>
        
        <mapper resource="mappers/oracle/systemLog/SystemLogMapper.xml"/>
        
        <mapper resource="mappers/oracle/crossSorting/CrossSortingMapper.xml"/>
        <mapper resource="mappers/oracle/globaltrade/LoadBillMapper.xml"/>
        <mapper resource="mappers/oracle/globaltrade/LoadBillReportMapper.xml"/>
        <mapper resource="mappers/oracle/gantry/GantryDeviceMapper.xml"/>
		<mapper resource="mappers/oracle/gantry/GantryDeviceConfigMapper.xml"/>
        <mapper resource="mappers/oracle/freshWaybill/freshWaybillMapper.xml"/>
	</mappers>
	
</configuration>