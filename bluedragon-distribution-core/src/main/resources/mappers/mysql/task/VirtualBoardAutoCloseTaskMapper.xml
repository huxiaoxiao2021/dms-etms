<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jd.bluedragon.distribution.task.dao.VirtualBoardAutoCloseTaskDao">

	<resultMap id="task"
		type="com.jd.bluedragon.distribution.task.domain.Task">
		<result column="task_id" property="id" />
		<result column="create_site_code" property="createSiteCode" />
		<result column="receive_site_code" property="receiveSiteCode" />
		<result column="box_code" property="boxCode" />
		<result column="execute_count" property="executeCount" />
		<result column="execute_time" property="executeTime" />
		<result column="fingerprint" property="fingerprint" />
		<result column="create_time" property="createTime" />
		<result column="update_time" property="updateTime" />
		<result column="task_status" property="status" />
		<result column="keyword1" property="keyword1" />
		<result column="keyword2" property="keyword2" />
		<result column="task_type" property="type" />
		<result column="body" property="body" />
		<result column="own_sign" property="ownSign" />
		<result column="yn" property="yn" />
		<result column="queue_id" property="queueId" />
	</resultMap>

	<insert id="add" parameterType="task">
		INSERT INTO task_board_auto_close (
		 task_type, create_site_code, receive_site_code, box_code,
		body,
		keyword1, keyword2, create_time, update_time, execute_count, execute_time,
		fingerprint, task_status, yn, own_sign ,queue_id)
		VALUES (
		 #{type,jdbcType=INTEGER},
		#{createSiteCode,jdbcType=INTEGER},
		#{receiveSiteCode,jdbcType=INTEGER},
		#{boxCode,jdbcType=VARCHAR}, #{body,jdbcType=VARCHAR},
		#{keyword1,jdbcType=VARCHAR}, #{keyword2,jdbcType=VARCHAR},
		NOW(), NOW(), 0,
		<choose>
			<when test="executeTime != null">
				#{executeTime},
			</when>
			<otherwise>
				NOW(),
			</otherwise>
		</choose>
		        #{fingerprint,jdbcType=VARCHAR}, 0, 1,
		#{ownSign,jdbcType=VARCHAR},#{queueId,jdbcType=INTEGER})
	</insert>

</mapper>